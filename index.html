<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JIM-G Card Creator - Pro Creator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {    --color1: #a1d8f0; --color2: #8ab6d6;    --card-width: 400px; --card-height: 560px;}
        body { background-color: #0b0f1a; color: #f8fafc; font-family: 'Segoe UI', sans-serif; }
        .card {    width: var(--card-width); height: var(--card-height);   position: relative; overflow: hidden; border-radius: 20px;    background-color: #04070a; background-image: var(--card-image);    background-size: cover; border: 10px solid var(--color1);    box-shadow: 0 30px 60px rgba(0,0,0,0.7);}
        .card__image { position: absolute; inset: 0; background-image: var(--card-image); background-size: cover; background-position: center; }
        .card__content { position: absolute; inset: 0; z-index: 10; display: flex; flex-direction: column; justify-content: space-between; padding: 30px; color: white; text-shadow: 0 3px 6px rgba(0,0,0,0.9); }
        .card__name { font-size: 24px; font-weight: 900; text-transform: uppercase; border-bottom: 2px solid var(--color1); display: inline-block; padding-bottom: 2px; }
        .rarity { font-size: 13px; color: #fff; background: var(--color1); padding: 3px 10px; border-radius: 4px; font-weight: 800; text-transform: uppercase; float: right; }
        .card__meta { background: rgba(0,0,0,0.92); padding: 25px; border-radius: 15px; border: 2px solid var(--color1); }
        .card__stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 15px; }
        .stat-inline { display: flex; flex-direction: column; align-items: center; }
        .stat-inline-label { font-size: 14px; color: var(--color1); font-weight: 900; text-transform: uppercase; }
        .stat-inline-value { font-size: 24px; font-weight: 800; }
        .card__desc { font-size: 16px; line-height: 1.4; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 12px; }
        .card-tile {    aspect-ratio: 2/3; background-size: cover; background-position: center;    border: 2px solid rgba(255,255,255,0.1); border-radius: 10px;    position: relative; transition: transform 0.2s; cursor: pointer;}
        .card-tile:hover { transform: scale(1.05); border-color: #3b82f6; }
        .card-tile-info {    position: absolute; bottom: 0; left: 0; right: 0;    background: rgba(0,0,0,0.8); font-size: 10px; padding: 4px;  text-align: center; border-radius: 0 0 10px 10px; overflow: hidden;    text-overflow: ellipsis; white-space: nowrap;}
        .glass-panel { background: rgba(20, 26, 39, 0.8); border: 1px solid rgba(255,255,255,0.05); }
        .preview-zoom { zoom: 0.8; }
        label { display: block; font-size: 10px; font-weight: 900; text-transform: uppercase; color: #60a5fa; margin-bottom: 4px; margin-left: 4px; }
        input, select, textarea { width: 100%; background: #0f172a; border: 1px solid #334155; border-radius: 12px; padding: 12px; font-size: 14px; outline: none; transition: border 0.2s; }
        input:focus { border-color: #3b82f6; }
    </style>
</head>
<body class="p-6">
    <div class="max-w-[1800px] mx-auto">
        <header class="mb-8 flex justify-between items-center border-b border-white/10 pb-4">
            <h1 class="text-3xl font-black italic tracking-tighter uppercase">JIM-G Card <span class="text-blue-500">Creator</span></h1>
            <button onclick="clearSession()" class="bg-red-600/10 hover:bg-red-600 text-red-500 hover:text-white px-5 py-2 rounded-xl border border-red-600/30 transition-all font-bold text-xs uppercase">
                Clear Session
            </button>
        </header>
        <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
            <div class="xl:col-span-4 glass-panel p-6 rounded-3xl space-y-4 overflow-y-auto max-h-[800px]">
                <div class="grid grid-cols-2 gap-4">
                    <div><label>Internal ID</label><input type="text" id="cardId" placeholder="card_name"></div>
                    <div><label>Display Name</label><input type="text" id="cardName" placeholder="Name"></div>
                </div>
                <div><label>Image URL</label><input type="text" id="cardImage" placeholder="https://..."></div>
                <div><label>Description</label><textarea id="cardDesc" placeholder="Ability description..." class="h-20"></textarea></div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label>Rarity</label>
                        <select id="rarity">
                            <option>Normal</option><option>Uncommon</option><option>Rare</option>
                            <option>Epic</option><option>Legendary</option><option>Holo</option>
                            <option value="OriginalArt">OriginalArt</option>
                        </select>
                    </div>
                    <div>
                        <label>Effect Type</label>
                        <select id="effectType">
                            <option value="Common_Uncommon">Common_Uncommon</option>
                            <option value="Holofoil_Rare">Holofoil_Rare</option>
                            <option value="Cosmos_Holofoil">Cosmos_Holofoil</option>
                            <option value="VMax">VMax</option>
                            <option value="VStar">VStar</option>
                            <option value="Rainbow_Rare">Rainbow_Rare</option>
                            <option value="Shiny_Vault">Shiny_Vault</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label>Brand</label>
                    <select id="brandSelect" onchange="toggleBrand(this.value)">
                        <option value="jg_warlords">JG Warlords</option>
                        <option value="jg_shin_genesis">JG Shin Genesis</option>
                        <option value="jg_void_ether">JG Void Ether</option>
                        <option value="jg_sands_of_eternity">JG Sands of Eternity</option>
                        <option value="CUSTOM">-- CUSTOM --</option>
                    </select>
                    <input type="text" id="customBrand" placeholder="Brand Name" class="hidden mt-2 border-blue-500">
                </div>
                <div id="statsInputs" class="pt-2 border-t border-white/5 grid grid-cols-4 gap-2">
                    <div><label>LV</label><input type="number" id="statLvl" value="1" oninput="cap(this)"></div>
                    <div><label>HP</label><input type="number" id="statHp" value="100" oninput="cap(this)"></div>
                    <div><label>ATK</label><input type="number" id="statAtk" value="50" oninput="cap(this)"></div>
                    <div><label>DEF</label><input type="number" id="statDef" value="50" oninput="cap(this)"></div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div><label>Color 1</label><input type="color" id="color1" value="#a1d8f0" class="h-14 cursor-pointer"></div>
                    <div><label>Color 2</label><input type="color" id="color2" value="#8ab6d6" class="h-14 cursor-pointer"></div>
                </div>
                <button onclick="addCard()" class="w-full bg-blue-600 hover:bg-blue-500 py-4 rounded-2xl font-black uppercase text-sm shadow-2xl transition-all">Add Card</button>
            </div>
            <div class="xl:col-span-4 flex justify-center items-center">
                <div class="preview-zoom">
                    <div class="card" id="mainCard">
                        <div class="card__image"></div>
                        <div class="card__content">
                            <div class="card__header">
                                <span class="rarity" id="p_rarity">NORMAL</span>
                                <h1 class="card__name" id="p_name">NAME</h1>
                            </div>
                            <div class="card__meta" id="p_meta">
                                <div class="card__stats">
                                    <div class="stat-inline"><span class="stat-inline-label">Lv</span><span class="stat-inline-value" id="p_lvl">0</span></div>
                                    <div class="stat-inline"><span class="stat-inline-label">HP</span><span class="stat-inline-value" id="p_hp">0</span></div>
                                    <div class="stat-inline"><span class="stat-inline-label">Atk</span><span class="stat-inline-value" id="p_atk">0</span></div>
                                    <div class="stat-inline"><span class="stat-inline-label">Def</span><span class="stat-inline-value" id="p_def">0</span></div>
                                </div>
                                <p class="card__desc" id="p_desc">Description...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="xl:col-span-4 glass-panel p-6 rounded-3xl flex flex-col h-[700px]">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xs font-black text-blue-400 uppercase tracking-widest">Your Collection</h2>
                    <span id="cardCount" class="bg-blue-600 text-[10px] px-2 py-1 rounded font-bold">0 CARDS</span>
                </div>
                <div id="queue" class="flex-grow grid grid-cols-3 gap-3 overflow-y-auto content-start pr-2"></div>
                <button onclick="downloadLua()" class="mt-6 w-full bg-emerald-600 hover:bg-emerald-500 py-5 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl">Download .LUA</button>
            </div>

        </div>
    </div>
    <script>
        let cards = JSON.parse(localStorage.getItem('jg_card_factory_final')) || [];
        renderQueue();
        function cap(el) { if(el.value > 999) el.value = 999; }
        function toggleBrand(v) { document.getElementById('customBrand').classList.toggle('hidden', v !== 'CUSTOM'); }
        function updatePreview() {
            const rarity = document.getElementById('rarity').value;
            const c1 = document.getElementById('color1').value;
            const img = document.getElementById('cardImage').value;

            document.getElementById('p_name').innerText = document.getElementById('cardName').value || "NAME";
            document.getElementById('p_rarity').innerText = rarity.toUpperCase();
            document.getElementById('p_desc').innerText = document.getElementById('cardDesc').value || "Description...";
            document.getElementById('p_lvl').innerText = document.getElementById('statLvl').value;
            document.getElementById('p_hp').innerText = document.getElementById('statHp').value;
            document.getElementById('p_atk').innerText = document.getElementById('statAtk').value;
            document.getElementById('p_def').innerText = document.getElementById('statDef').value;
            const card = document.getElementById('mainCard');
            card.style.setProperty('--card-image', `url('${img}')`);
            card.style.borderColor = c1;
            document.getElementById('p_rarity').style.backgroundColor = c1;
            document.getElementById('p_meta').style.borderColor = c1;
            document.getElementById('p_meta').style.display = (rarity === 'OriginalArt') ? 'none' : 'block';
            document.getElementById('statsInputs').style.opacity = (rarity === 'OriginalArt') ? '0.3' : '1';
        }
        function addCard() {
            const brandVal = document.getElementById('brandSelect').value;
            const rarity = document.getElementById('rarity').value;
            const card = {
                id: document.getElementById('cardId').value || 'card_' + Date.now(),
                name: document.getElementById('cardName').value || 'New Card',
                description: document.getElementById('cardDesc').value,
                image: document.getElementById('cardImage').value,
                rarity: rarity,
                isOriginal: rarity === 'OriginalArt',
                brand: brandVal === 'CUSTOM' ? document.getElementById('customBrand').value : brandVal,
                effectType: document.getElementById('effectType').value,
                stats: {
                    level: document.getElementById('statLvl').value,
                    hp: document.getElementById('statHp').value,
                    attack: document.getElementById('statAtk').value,
                    defense: document.getElementById('statDef').value
                },
                colors: { color1: document.getElementById('color1').value, color2: document.getElementById('color2').value }
            };
            cards.push(card);
            save();
            renderQueue();
        }
        function renderQueue() {
            const q = document.getElementById('queue'); q.innerHTML = '';
            cards.forEach((c, i) => {
                const tile = document.createElement('div');
                tile.className = 'card-tile';
                tile.style.backgroundImage = `url('${c.image}')`;
                tile.innerHTML = `<div class="card-tile-info">${c.id}</div><button onclick="removeCard(${i})" class="absolute -top-1 -right-1 bg-red-600 text-white rounded-full w-5 h-5 text-[8px] flex items-center justify-center font-black">X</button>`;
                q.appendChild(tile);
            });
            document.getElementById('cardCount').innerText = `${cards.length} CARDS`;
        }
        function removeCard(i) { cards.splice(i, 1); save(); renderQueue(); }
        function save() { localStorage.setItem('jg_card_factory_final', JSON.stringify(cards)); }
        function clearSession() { if(confirm("Clear all?")) { cards = []; save(); renderQueue(); } }
        function downloadLua() {
            if(cards.length === 0) return;
            let lua = 'Config.Cards = {\n';
            cards.forEach(c => {
                lua += `    ['${c.id}'] = {\n`;
                lua += `        name = '${c.name.toLowerCase()}',\n`;
                lua += `        description = '${c.description}',\n`;
                lua += `        image = '${c.image}',\n`;
                
                if (c.isOriginal) {
                    lua += `        style = 'OriginalArt',\n`;
                    lua += `        rarity = '${c.rarity}',\n`;
                } else {
                    lua += `        rarity = '${c.rarity}',\n`;
                }
                
                lua += `        brand = '${c.brand}',\n`;
                lua += `        effectType = '${c.effectType}',\n`;
                
                if (!c.isOriginal) {
                    lua += `        stats = { level = ${c.stats.level}, hp = ${c.stats.hp}, attack = ${c.stats.attack}, defense = ${c.stats.defense} },\n`;
                }
                
                lua += `        colors = { color1 = '${c.colors.color1}', color2 = '${c.colors.color2}' }\n`;
                lua += `    },\n`;
            });
            lua += '}';
            const blob = new Blob([lua], {type: 'text/plain'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'config_cards.lua';
            a.click();
        }
        document.querySelectorAll('input, select, textarea').forEach(el => el.addEventListener('input', updatePreview));
        updatePreview();
    </script>
</body>
</html>
